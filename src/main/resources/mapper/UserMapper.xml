<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.imagehandle2022.seal.mapper.UserMapper">
    <insert id="saveUser" parameterType="user">
       insert into ttms_user(id,username,fullName,password,birthDate,gender,age,contactWay,roleName) values (#{id},#{username},#{fullName},#{password},#{birthDate},#{gender},#{age},#{contactWay},#{roleName})
    </insert>

    <delete id="deleteUserById" parameterType="long">
        delete from ttms_user where id=#{id}
    </delete>

    <update id="updateUser" parameterType="user">
        update ttms_user set username = #{username},fullName=#{fullName},password=#{password},birthDate=#{birthDate},gender=#{gender},
        age=#{age},contactWay=#{contactWay},roleName=#{roleName} where id=#{id}
    </update>

    <select id="login" resultType="user">
        select id,username,fullName,password,birthDate,gender,age,contactWay,roleName from ttms_user where username=#{username} and password=#{password}
    </select>

    <select id="getUserById" parameterType="Long" resultType="user">
        select id,username,fullName,password,birthDate,gender,age,contactWay,roleName from ttms_user where id = #{id}
    </select>

    <select id="findUserByCriteria" parameterType="userCriteria" resultType="user">
        select id,username,fullName,password,birthDate,gender,age,contactWay,roleName from ttms_user where 1=1
        <if test="fullName!=null and fullName.trim().length>0">
            and fullName like concat("%",#{fullName},"%")
        </if>
    </select>

    <select id="getCount" parameterType="userCriteria" resultType="java.lang.Integer">
        SELECT count(0) FROM ttms_user WHERE 1 = 1
        <if test="fullName!=null and fullName.trim().length>0">
            and fullName like concat("%",#{fullName},"%")
        </if>
    </select>
    <select id="getUserByUsername" resultType="com.example.imagehandle2022.entity.UserInfo" parameterType="string">
        select * from ttms_user where username = #{username}
    </select>
</mapper>
